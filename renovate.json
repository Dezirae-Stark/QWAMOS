{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "QWAMOS Renovate Configuration - Automated dependency updates with security-first approach",
  "extends": [
    "config:base",
    ":dependencyDashboard",
    ":semanticCommits",
    ":separateMajorReleases",
    ":combinePatchMinorReleases"
  ],
  "timezone": "UTC",
  "schedule": [
    "before 3am on Monday"
  ],
  "prConcurrentLimit": 5,
  "prCreation": "not-pending",
  "prHourlyLimit": 2,
  "updateNotScheduled": false,
  "rebaseWhen": "behind-base-branch",
  "labels": [
    "dependencies",
    "renovate"
  ],
  "assignees": [],
  "reviewers": [],
  "semanticCommits": "enabled",
  "commitMessagePrefix": "chore(deps):",
  "commitMessageAction": "Update",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newVersion}}",
  "commitBody": "ü§ñ Generated by Renovate Bot\n\nSee: {{sourceUrl}}",
  "separateMinorPatch": true,
  "automerge": false,
  "platformAutomerge": false,
  "ignoreTests": false,
  "respectLatest": true,
  "rangeStrategy": "bump",
  "bumpVersion": null,
  "packageRules": [
    {
      "description": "Automerge patch updates if tests pass",
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "automergeStrategy": "squash",
      "matchCurrentVersion": "!/^0/",
      "ignoreTests": false,
      "platformAutomerge": true
    },
    {
      "description": "Automerge minor updates for GitHub Actions",
      "matchManagers": [
        "github-actions"
      ],
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group all non-major updates together weekly",
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "groupName": "all non-major dependencies",
      "groupSlug": "all-minor-patch"
    },
    {
      "description": "Security: Block automerge for cryptographic libraries",
      "matchPackageNames": [
        "liboqs",
        "pqcrypto",
        "kyber",
        "dilithium",
        "sphincs",
        "openssl",
        "libsodium",
        "cryptography",
        "pycryptodome",
        "bcrypt",
        "argon2",
        "scrypt"
      ],
      "automerge": false,
      "labels": [
        "security",
        "crypto",
        "manual-review-required"
      ],
      "reviewers": [],
      "prPriority": 10,
      "commitMessagePrefix": "chore(security):"
    },
    {
      "description": "Security: Major version updates require manual review",
      "matchUpdateTypes": [
        "major"
      ],
      "automerge": false,
      "labels": [
        "major-update",
        "manual-review-required"
      ],
      "prPriority": 5
    },
    {
      "description": "Python packages - pip/requirements.txt",
      "matchManagers": [
        "pip_requirements",
        "pip_setup",
        "pipenv",
        "poetry"
      ],
      "groupName": "Python dependencies",
      "labels": [
        "python",
        "dependencies"
      ],
      "schedule": [
        "before 3am on Monday"
      ]
    },
    {
      "description": "Kotlin/Gradle dependencies",
      "matchManagers": [
        "gradle",
        "gradle-wrapper"
      ],
      "groupName": "Kotlin/Gradle dependencies",
      "labels": [
        "kotlin",
        "gradle",
        "dependencies"
      ],
      "schedule": [
        "before 3am on Monday"
      ]
    },
    {
      "description": "Flutter/Dart packages",
      "matchManagers": [
        "pub"
      ],
      "groupName": "Flutter dependencies",
      "labels": [
        "flutter",
        "dependencies"
      ],
      "schedule": [
        "before 3am on Monday"
      ]
    },
    {
      "description": "Docker images",
      "matchManagers": [
        "docker-compose",
        "dockerfile"
      ],
      "groupName": "Docker images",
      "labels": [
        "docker",
        "dependencies"
      ],
      "schedule": [
        "before 3am on Monday"
      ]
    },
    {
      "description": "GitHub Actions",
      "matchManagers": [
        "github-actions"
      ],
      "groupName": "GitHub Actions",
      "labels": [
        "github-actions",
        "ci-cd"
      ],
      "pinDigests": true,
      "schedule": [
        "before 3am on Monday"
      ]
    },
    {
      "description": "Termux packages - block automatic updates",
      "matchFileNames": [
        "termux/**",
        "**/termux/**"
      ],
      "enabled": false,
      "labels": [
        "termux",
        "manual-update-only"
      ]
    }
  ],
  "vulnerabilityAlerts": {
    "enabled": true,
    "labels": [
      "security",
      "vulnerability"
    ],
    "automerge": false,
    "schedule": [
      "at any time"
    ],
    "prPriority": 99
  },
  "osvVulnerabilityAlerts": true,
  "dependencyDashboard": true,
  "dependencyDashboardTitle": "QWAMOS Dependency Dashboard",
  "dependencyDashboardHeader": "This dashboard shows all pending dependency updates for QWAMOS.\n\n‚ö†Ô∏è **Security Notice**: Cryptographic library updates require manual review before merging.",
  "dependencyDashboardFooter": "ü§ñ Automated by Renovate Bot\n\nSchedule: Weekly on Monday before 3am UTC",
  "dependencyDashboardLabels": [
    "dependencies",
    "renovate-dashboard"
  ],
  "pip_requirements": {
    "fileMatch": [
      "(^|/)requirements.*\\.txt$",
      "(^|/).*requirements\\.txt$"
    ]
  },
  "gradle": {
    "fileMatch": [
      "\\.gradle$",
      "\\.gradle\\.kts$",
      "gradle\\.properties$",
      "gradle-wrapper\\.properties$"
    ]
  },
  "dockerfile": {
    "fileMatch": [
      "(^|/)Dockerfile$",
      "(^|/)Dockerfile\\.[^/]*$"
    ]
  },
  "docker-compose": {
    "fileMatch": [
      "(^|/)docker-compose[^/]*\\.ya?ml$"
    ]
  },
  "pub": {
    "fileMatch": [
      "(^|/)pubspec\\.yaml$"
    ]
  },
  "regex": {
    "fileMatch": [
      "^.+\\.sh$",
      "^scripts/.+$"
    ],
    "matchStrings": [
      "# renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\s+[A-Z_]+_VERSION=[\"']?(?<currentValue>.*?)[\"']?\\s"
    ]
  },
  "ignoreDeps": [
    "node",
    "npm"
  ],
  "ignorePresets": [],
  "python": {
    "additionalBranchPrefix": "python-"
  },
  "postUpdateOptions": [
    "gomodTidy",
    "npmDedupe"
  ],
  "prBodyTemplate": "{{{header}}}{{{table}}}{{{warnings}}}{{{notes}}}{{{changelogs}}}{{{configDescription}}}{{{controls}}}{{{footer}}}",
  "prBodyColumns": [
    "Package",
    "Type",
    "Update",
    "Change",
    "Pending"
  ],
  "prBodyDefinitions": {
    "Package": "**{{{depNameLinked}}}**",
    "Type": "{{{updateType}}}",
    "Update": "{{{displayFrom}}} ‚Üí {{{displayTo}}}",
    "Change": "[Compare]({{{sourceUrl}}}/compare/{{{currentVersion}}}...{{{newVersion}}})",
    "Pending": "{{{#if isPending}}}‚è≥{{{else}}}‚úÖ{{{/if}}}"
  },
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": [
      "before 3am on the first day of the month"
    ],
    "commitMessageAction": "Update",
    "commitMessageTopic": "lock files",
    "automerge": true
  },
  "stabilityDays": 3,
  "prNotPendingHours": 24,
  "confidential": false,
  "enabledManagers": [
    "pip_requirements",
    "pip_setup",
    "gradle",
    "gradle-wrapper",
    "pub",
    "dockerfile",
    "docker-compose",
    "github-actions",
    "regex"
  ]
}
